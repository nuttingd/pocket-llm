{
  "formatVersion": 1,
  "database": {
    "version": 5,
    "identityHash": "4850b33d04c9599eedf0a7e4deaee12c",
    "entities": [
      {
        "tableName": "server_profiles",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` TEXT NOT NULL, `name` TEXT NOT NULL, `baseUrl` TEXT NOT NULL, `hasApiKey` INTEGER NOT NULL, `requestTimeoutSeconds` INTEGER NOT NULL, `createdAt` INTEGER NOT NULL, `updatedAt` INTEGER NOT NULL, PRIMARY KEY(`id`))",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "name",
            "columnName": "name",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "baseUrl",
            "columnName": "baseUrl",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "hasApiKey",
            "columnName": "hasApiKey",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "requestTimeoutSeconds",
            "columnName": "requestTimeoutSeconds",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "createdAt",
            "columnName": "createdAt",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "updatedAt",
            "columnName": "updatedAt",
            "affinity": "INTEGER",
            "notNull": true
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": [
            "id"
          ]
        }
      },
      {
        "tableName": "conversations",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` TEXT NOT NULL, `title` TEXT NOT NULL, `lastServerProfileId` TEXT DEFAULT NULL, `lastModelId` TEXT, `systemPrompt` TEXT, `temperature` REAL, `maxTokens` INTEGER, `topP` REAL, `frequencyPenalty` REAL, `presencePenalty` REAL, `activeLeafMessageId` TEXT, `createdAt` INTEGER NOT NULL, `updatedAt` INTEGER NOT NULL, PRIMARY KEY(`id`), FOREIGN KEY(`lastServerProfileId`) REFERENCES `server_profiles`(`id`) ON UPDATE NO ACTION ON DELETE SET NULL )",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "title",
            "columnName": "title",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "lastServerProfileId",
            "columnName": "lastServerProfileId",
            "affinity": "TEXT",
            "defaultValue": "NULL"
          },
          {
            "fieldPath": "lastModelId",
            "columnName": "lastModelId",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "systemPrompt",
            "columnName": "systemPrompt",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "temperature",
            "columnName": "temperature",
            "affinity": "REAL"
          },
          {
            "fieldPath": "maxTokens",
            "columnName": "maxTokens",
            "affinity": "INTEGER"
          },
          {
            "fieldPath": "topP",
            "columnName": "topP",
            "affinity": "REAL"
          },
          {
            "fieldPath": "frequencyPenalty",
            "columnName": "frequencyPenalty",
            "affinity": "REAL"
          },
          {
            "fieldPath": "presencePenalty",
            "columnName": "presencePenalty",
            "affinity": "REAL"
          },
          {
            "fieldPath": "activeLeafMessageId",
            "columnName": "activeLeafMessageId",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "createdAt",
            "columnName": "createdAt",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "updatedAt",
            "columnName": "updatedAt",
            "affinity": "INTEGER",
            "notNull": true
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": [
            "id"
          ]
        },
        "indices": [
          {
            "name": "index_conversations_updatedAt",
            "unique": false,
            "columnNames": [
              "updatedAt"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_conversations_updatedAt` ON `${TABLE_NAME}` (`updatedAt`)"
          },
          {
            "name": "index_conversations_lastServerProfileId",
            "unique": false,
            "columnNames": [
              "lastServerProfileId"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_conversations_lastServerProfileId` ON `${TABLE_NAME}` (`lastServerProfileId`)"
          }
        ],
        "foreignKeys": [
          {
            "table": "server_profiles",
            "onDelete": "SET NULL",
            "onUpdate": "NO ACTION",
            "columns": [
              "lastServerProfileId"
            ],
            "referencedColumns": [
              "id"
            ]
          }
        ]
      },
      {
        "tableName": "messages",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` TEXT NOT NULL, `conversationId` TEXT NOT NULL, `parentMessageId` TEXT DEFAULT NULL, `role` TEXT NOT NULL, `content` TEXT NOT NULL, `thinkingContent` TEXT, `serverProfileId` TEXT, `modelId` TEXT, `promptTokens` INTEGER, `completionTokens` INTEGER, `totalTokens` INTEGER, `toolCallId` TEXT, `toolCallsJson` TEXT, `imageUris` TEXT, `depth` INTEGER NOT NULL, `childCount` INTEGER NOT NULL, `createdAt` INTEGER NOT NULL, PRIMARY KEY(`id`), FOREIGN KEY(`conversationId`) REFERENCES `conversations`(`id`) ON UPDATE NO ACTION ON DELETE CASCADE , FOREIGN KEY(`parentMessageId`) REFERENCES `messages`(`id`) ON UPDATE NO ACTION ON DELETE CASCADE )",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "conversationId",
            "columnName": "conversationId",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "parentMessageId",
            "columnName": "parentMessageId",
            "affinity": "TEXT",
            "defaultValue": "NULL"
          },
          {
            "fieldPath": "role",
            "columnName": "role",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "content",
            "columnName": "content",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "thinkingContent",
            "columnName": "thinkingContent",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "serverProfileId",
            "columnName": "serverProfileId",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "modelId",
            "columnName": "modelId",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "promptTokens",
            "columnName": "promptTokens",
            "affinity": "INTEGER"
          },
          {
            "fieldPath": "completionTokens",
            "columnName": "completionTokens",
            "affinity": "INTEGER"
          },
          {
            "fieldPath": "totalTokens",
            "columnName": "totalTokens",
            "affinity": "INTEGER"
          },
          {
            "fieldPath": "toolCallId",
            "columnName": "toolCallId",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "toolCallsJson",
            "columnName": "toolCallsJson",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "imageUris",
            "columnName": "imageUris",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "depth",
            "columnName": "depth",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "childCount",
            "columnName": "childCount",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "createdAt",
            "columnName": "createdAt",
            "affinity": "INTEGER",
            "notNull": true
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": [
            "id"
          ]
        },
        "indices": [
          {
            "name": "index_messages_conversationId",
            "unique": false,
            "columnNames": [
              "conversationId"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_messages_conversationId` ON `${TABLE_NAME}` (`conversationId`)"
          },
          {
            "name": "index_messages_parentMessageId",
            "unique": false,
            "columnNames": [
              "parentMessageId"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_messages_parentMessageId` ON `${TABLE_NAME}` (`parentMessageId`)"
          }
        ],
        "foreignKeys": [
          {
            "table": "conversations",
            "onDelete": "CASCADE",
            "onUpdate": "NO ACTION",
            "columns": [
              "conversationId"
            ],
            "referencedColumns": [
              "id"
            ]
          },
          {
            "table": "messages",
            "onDelete": "CASCADE",
            "onUpdate": "NO ACTION",
            "columns": [
              "parentMessageId"
            ],
            "referencedColumns": [
              "id"
            ]
          }
        ]
      },
      {
        "tableName": "compaction_summaries",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` TEXT NOT NULL, `conversationId` TEXT NOT NULL, `summary` TEXT NOT NULL, `compactedMessageCount` INTEGER NOT NULL, `insertedBeforeMessageId` TEXT, `createdAt` INTEGER NOT NULL, PRIMARY KEY(`id`), FOREIGN KEY(`conversationId`) REFERENCES `conversations`(`id`) ON UPDATE NO ACTION ON DELETE CASCADE )",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "conversationId",
            "columnName": "conversationId",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "summary",
            "columnName": "summary",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "compactedMessageCount",
            "columnName": "compactedMessageCount",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "insertedBeforeMessageId",
            "columnName": "insertedBeforeMessageId",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "createdAt",
            "columnName": "createdAt",
            "affinity": "INTEGER",
            "notNull": true
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": [
            "id"
          ]
        },
        "indices": [
          {
            "name": "index_compaction_summaries_conversationId",
            "unique": false,
            "columnNames": [
              "conversationId"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_compaction_summaries_conversationId` ON `${TABLE_NAME}` (`conversationId`)"
          }
        ],
        "foreignKeys": [
          {
            "table": "conversations",
            "onDelete": "CASCADE",
            "onUpdate": "NO ACTION",
            "columns": [
              "conversationId"
            ],
            "referencedColumns": [
              "id"
            ]
          }
        ]
      },
      {
        "tableName": "message_fts",
        "createSql": "CREATE VIRTUAL TABLE IF NOT EXISTS `${TABLE_NAME}` USING FTS4(`content` TEXT NOT NULL, tokenize=unicode61, content=`messages`)",
        "fields": [
          {
            "fieldPath": "content",
            "columnName": "content",
            "affinity": "TEXT",
            "notNull": true
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": []
        },
        "ftsVersion": "FTS4",
        "ftsOptions": {
          "tokenizer": "unicode61",
          "tokenizerArgs": [],
          "contentTable": "messages",
          "languageIdColumnName": "",
          "matchInfo": "FTS4",
          "notIndexedColumns": [],
          "prefixSizes": [],
          "preferredOrder": "ASC"
        },
        "contentSyncTriggers": [
          "CREATE TRIGGER IF NOT EXISTS room_fts_content_sync_message_fts_BEFORE_UPDATE BEFORE UPDATE ON `messages` BEGIN DELETE FROM `message_fts` WHERE `docid`=OLD.`rowid`; END",
          "CREATE TRIGGER IF NOT EXISTS room_fts_content_sync_message_fts_BEFORE_DELETE BEFORE DELETE ON `messages` BEGIN DELETE FROM `message_fts` WHERE `docid`=OLD.`rowid`; END",
          "CREATE TRIGGER IF NOT EXISTS room_fts_content_sync_message_fts_AFTER_UPDATE AFTER UPDATE ON `messages` BEGIN INSERT INTO `message_fts`(`docid`, `content`) VALUES (NEW.`rowid`, NEW.`content`); END",
          "CREATE TRIGGER IF NOT EXISTS room_fts_content_sync_message_fts_AFTER_INSERT AFTER INSERT ON `messages` BEGIN INSERT INTO `message_fts`(`docid`, `content`) VALUES (NEW.`rowid`, NEW.`content`); END"
        ]
      },
      {
        "tableName": "tool_definitions",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` TEXT NOT NULL, `name` TEXT NOT NULL, `description` TEXT NOT NULL, `parametersSchemaJson` TEXT NOT NULL, `isBuiltIn` INTEGER NOT NULL, `isEnabledByDefault` INTEGER NOT NULL, PRIMARY KEY(`id`))",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "name",
            "columnName": "name",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "description",
            "columnName": "description",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "parametersSchemaJson",
            "columnName": "parametersSchemaJson",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "isBuiltIn",
            "columnName": "isBuiltIn",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "isEnabledByDefault",
            "columnName": "isEnabledByDefault",
            "affinity": "INTEGER",
            "notNull": true
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": [
            "id"
          ]
        }
      },
      {
        "tableName": "conversation_tool_enabled",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`conversationId` TEXT NOT NULL, `toolDefinitionId` TEXT NOT NULL, `isEnabled` INTEGER NOT NULL, PRIMARY KEY(`conversationId`, `toolDefinitionId`), FOREIGN KEY(`conversationId`) REFERENCES `conversations`(`id`) ON UPDATE NO ACTION ON DELETE CASCADE , FOREIGN KEY(`toolDefinitionId`) REFERENCES `tool_definitions`(`id`) ON UPDATE NO ACTION ON DELETE CASCADE )",
        "fields": [
          {
            "fieldPath": "conversationId",
            "columnName": "conversationId",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "toolDefinitionId",
            "columnName": "toolDefinitionId",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "isEnabled",
            "columnName": "isEnabled",
            "affinity": "INTEGER",
            "notNull": true
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": [
            "conversationId",
            "toolDefinitionId"
          ]
        },
        "indices": [
          {
            "name": "index_conversation_tool_enabled_conversationId",
            "unique": false,
            "columnNames": [
              "conversationId"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_conversation_tool_enabled_conversationId` ON `${TABLE_NAME}` (`conversationId`)"
          },
          {
            "name": "index_conversation_tool_enabled_toolDefinitionId",
            "unique": false,
            "columnNames": [
              "toolDefinitionId"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_conversation_tool_enabled_toolDefinitionId` ON `${TABLE_NAME}` (`toolDefinitionId`)"
          }
        ],
        "foreignKeys": [
          {
            "table": "conversations",
            "onDelete": "CASCADE",
            "onUpdate": "NO ACTION",
            "columns": [
              "conversationId"
            ],
            "referencedColumns": [
              "id"
            ]
          },
          {
            "table": "tool_definitions",
            "onDelete": "CASCADE",
            "onUpdate": "NO ACTION",
            "columns": [
              "toolDefinitionId"
            ],
            "referencedColumns": [
              "id"
            ]
          }
        ]
      },
      {
        "tableName": "parameter_presets",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` TEXT NOT NULL, `name` TEXT NOT NULL, `isBuiltIn` INTEGER NOT NULL, `temperature` REAL, `maxTokens` INTEGER, `topP` REAL, `frequencyPenalty` REAL, `presencePenalty` REAL, PRIMARY KEY(`id`))",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "name",
            "columnName": "name",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "isBuiltIn",
            "columnName": "isBuiltIn",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "temperature",
            "columnName": "temperature",
            "affinity": "REAL"
          },
          {
            "fieldPath": "maxTokens",
            "columnName": "maxTokens",
            "affinity": "INTEGER"
          },
          {
            "fieldPath": "topP",
            "columnName": "topP",
            "affinity": "REAL"
          },
          {
            "fieldPath": "frequencyPenalty",
            "columnName": "frequencyPenalty",
            "affinity": "REAL"
          },
          {
            "fieldPath": "presencePenalty",
            "columnName": "presencePenalty",
            "affinity": "REAL"
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": [
            "id"
          ]
        }
      }
    ],
    "setupQueries": [
      "CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER PRIMARY KEY,identity_hash TEXT)",
      "INSERT OR REPLACE INTO room_master_table (id,identity_hash) VALUES(42, '4850b33d04c9599eedf0a7e4deaee12c')"
    ]
  }
}